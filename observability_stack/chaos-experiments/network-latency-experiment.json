{
  "version": "1.0.0",
  "title": "Network Latency Injection",
  "description": "Test the behavior of services under network latency",
  "steady-state-hypothesis": {
    "title": "Services should respond within acceptable time",
    "probes": [
      {
        "name": "response-time-check",
        "type": "probe",
        "provider": {
          "type": "http",
          "url": "http://python-service:5000/api/data",
          "method": "GET"
        },
        "tolerance": [200, 201, 202, 204]
      }
    ]
  },
  "method": [
    {
      "type": "action",
      "name": "inject-network-latency",
      "provider": {
        "type": "python",
        "module": "chaoslib.process",
        "func": "run_command",
        "arguments": {
          "command": "tc qdisc add dev eth0 root netem delay 200ms",
          "timeout": 10
        }
      },
      "pauses": {
        "after": 60
      }
    }
  ],
  "rollbacks": [
    {
      "type": "action",
      "name": "remove-network-latency",
      "provider": {
        "type": "python",
        "module": "chaoslib.process",
        "func": "run_command",
        "arguments": {
          "command": "tc qdisc del dev eth0 root netem",
          "timeout": 10
        }
      }
    }
  ]
}
